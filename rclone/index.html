<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>RClone - Notes</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "RClone";
        var mkdocs_page_input_path = "rclone.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Notes
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../network/">Network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../keys/">Key Management</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../bring_up/">Bring Up</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../raid/">RAID</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../borg/">Borg</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">RClone</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#remote-management">Remote Management</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#list-remotes">List Remotes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#creation">Creation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#backup">Backup</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../kvm/">KVM</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Services</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pihole/">PiHole</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Notes</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Tools</li>
      <li class="breadcrumb-item active">RClone</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="rclone">rclone</h1>
<p>rclone is a utility that supports a wide variety of storage services for the movements of data. rclone is design
to work in a similar fashion to rsync and support many similar options. The rclone help menu can be opened with
the <em>--help</em> option.</p>
<p>Additional information on rclone can be found at https://rclone.org/.</p>
<pre><code class="language-bash">root@www:/mnt/critical/Secure_maintenance/network-services# rclone --help

Rclone syncs files to and from cloud storage providers as well as
mounting them, listing them in lots of different ways.

See the home page (https://rclone.org/) for installation, usage,
documentation, changelog and configuration walkthroughs.

Usage:
  rclone [flags]
  rclone [command]

Available Commands:
  about           Get quota information from the remote.
  authorize       Remote authorization.
  backend         Run a backend-specific command.
  bisync          Perform bidirectional synchronization between two paths.
  cat             Concatenates any files and sends them to stdout.
  check           Checks the files in the source and destination match.
  checksum        Checks the files in the source against a SUM file.
  cleanup         Clean up the remote if possible.
  completion      Generate the autocompletion script for the specified shell
  config          Enter an interactive configuration session.
  copy            Copy files from source to dest, skipping identical files.
  copyto          Copy files from source to dest, skipping identical files.
  copyurl         Copy url content to dest.
  cryptcheck      Cryptcheck checks the integrity of a crypted remote.
  cryptdecode     Cryptdecode returns unencrypted file names.
  dedupe          Interactively find duplicate filenames and delete/rename them.
  delete          Remove the files in path.
  deletefile      Remove a single file from remote.
  genautocomplete Output completion script for a given shell.
  gendocs         Output markdown docs for rclone to the directory supplied.
  hashsum         Produces a hashsum file for all the objects in the path.
  help            Show help for rclone commands, flags and backends.
  link            Generate public link to file/folder.
  listremotes     List all the remotes in the config file.
  ls              List the objects in the path with size and path.
  lsd             List all directories/containers/buckets in the path.
  lsf             List directories and objects in remote:path formatted for parsing.
  lsjson          List directories and objects in the path in JSON format.
  lsl             List the objects in path with modification time, size and path.
  md5sum          Produces an md5sum file for all the objects in the path.
  mkdir           Make the path if it doesnt already exist.
  mount           Mount the remote as file system on a mountpoint.
  move            Move files from source to dest.
  moveto          Move file or directory from source to dest.
  ncdu            Explore a remote with a text based user interface.
  obscure         Obscure password for use in the rclone config file.
  purge           Remove the path and all of its contents.
  rc              Run a command against a running rclone.
  rcat            Copies standard input to file on remote.
  rcd             Run rclone listening to remote control commands only.
  rmdir           Remove the empty directory at path.
  rmdirs          Remove empty directories under the path.
  selfupdate      Update the rclone binary.
  serve           Serve a remote over a protocol.
  settier         Changes storage class/tier of objects in remote.
  sha1sum         Produces an sha1sum file for all the objects in the path.
  size            Prints the total size and number of objects in remote:path.
  sync            Make source and dest identical, modifying destination only.
  test            Run a test command
  touch           Create new file or change file modification time.
  tree            List the contents of the remote in a tree like fashion.
  version         Show the version number.

Use &quot;rclone [command] --help&quot; for more information about a command.
Use &quot;rclone help flags&quot; for to see the global flags.
Use &quot;rclone help backends&quot; for a list of supported services.
</code></pre>
<h2 id="remote-management">Remote Management</h2>
<p>Within rclone, data can be pushed or pulled from remotes that have been configured within the
system. For instance, pushing data into an S3 bucket would require that a dedicated remote be
created that points to Amazon AWS S3.</p>
<h3 id="list-remotes">List Remotes</h3>
<p>The currently configured remotes within the system can be seen with the rclone listremotes command.</p>
<pre><code class="language-bash">root@www:/mnt/critical/Secure_maintenance/network-services# rclone listremotes
iDriveE2NextcloudProd:
iDriveE2VaultwardenProd:
</code></pre>
<p>It's possible to determine where the file storing the configuration is located with the following command.</p>
<pre><code class="language-bash">root@www:/mnt/critical/Secure_maintenance/network-services# rclone config file
Configuration file is stored at:
/root/.config/rclone/rclone.conf
</code></pre>
<h3 id="creation">Creation</h3>
<p>Adding remotes allows for data to be pulled or pushed to additional locations.</p>
<pre><code class="language-bash">rclone config
</code></pre>
<p>The above command will open an interactive menu for managing the remotes within the system. For this section,
the 'n' option should be selected to add new targets.</p>
<pre><code class="language-bash">root@www:/mnt/critical/Secure_maintenance/network-services# rclone config
Current remotes:

Name                 Type
====                 ====
iDriveE2NextcloudProd s3
iDriveE2VaultwardenProd s3

e) Edit existing remote
n) New remote
d) Delete remote
r) Rename remote
c) Copy remote
s) Set configuration password
q) Quit config
</code></pre>
<h2 id="backup">Backup</h2>
<p>Rclone can be utilized to push and pull data to the remotes that are configured. The pushing of data into the remote
can be utilized in a backup process. For instance, the results of a duplicity could be pushed into a remote S3 bucket
to support offsite backup operations.</p>
<p>The following is an example of pushing data from a duplicity backup to an iDrive E2 bucket. The appropriate fields will
need to be updated as required.</p>
<pre><code class="language-bash">rclone copy --progress &lt;source&gt; &lt;remote&gt;:/&lt;bucket name&gt;
</code></pre>
<p>The credential programmed into the E2 remote must be provided with write access to the desired remote. The previous command
will pull the files from the source directory and upload them into the provided bucket. The following is an example related
to the backup of Vaultwarden to an E2 bucket called vaultwarden-duplicity-prod. The <em>--progress</em> flag tell rclone to provide
performance metrics as the upload process is in progress.</p>
<pre><code class="language-bash">rclone copy --progress /mnt/backup/duplicity/vaultwarden iDriveE2VaultwardenProd:/vaultwarden-duplicity-prod
</code></pre>
<p>As with all backups, it's important to be able to acquire the files in the event a recovery becomes necessary. This is easily done
with rclone. The credentials programmed into the remote will need to have read access to the E2 bucket. The following is the pattern
for performing a restoration.</p>
<pre><code class="language-bash">rclone copy --progress &lt;remote&gt;:/&lt;bucket name&gt;/&lt;folder&gt; &lt;destination&gt; 
</code></pre>
<p>In the previous example, the remote is the first argument in the copy operation. This tells rclone that the data should be downloaded
from the remote and stored wtihin the target destination.</p>
<pre><code class="language-bash">rclone copy --progress iDriveE2VaultwardenProd:/vaultwarden-duplicity-prod/2022 /mnt/restore/vaultwarden/2022 
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../borg/" class="btn btn-neutral float-left" title="Borg"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../kvm/" class="btn btn-neutral float-right" title="KVM">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../borg/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../kvm/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
